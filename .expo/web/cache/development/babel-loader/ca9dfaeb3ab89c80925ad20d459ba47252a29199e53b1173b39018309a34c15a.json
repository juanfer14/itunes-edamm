{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar __ReactNativeStyleSheet = require('react-native').StyleSheet;\nvar _sheet = __ReactNativeStyleSheet.create({\n  \"0:SongItem.jsx:78\": {},\n  \"1:SongItem.jsx:78\": {\n    \"flex\": 1,\n    \"flexDirection\": \"row\",\n    \"alignItems\": \"center\"\n  }\n});\nvar __ReactNativeView = require('react-native').View;\nvar __ReactNativeText = require('react-native').Text;\nimport React, { memo, useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Text, ListItem, Spinner, XStack } from 'tamagui';\nimport { Image } from 'expo-image';\nimport { useFonts } from \"expo-font\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setLoad, setMoreLoading } from \"../features/status/statusSlice\";\nimport { setIsSongSelected, setSelectedSong } from \"../features/songs/songSlice\";\nimport { FlashList } from \"@shopify/flash-list\";\nimport { useHeaderHeight } from '@react-navigation/elements';\nimport { MaterialIcons } from '@expo/vector-icons';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport var SongItem = memo(function (props) {\n  var songs = props.songs;\n  var _useFonts = useFonts({\n      Inter: require('@tamagui/font-inter/otf/Inter-Medium.otf'),\n      InterBold: require('@tamagui/font-inter/otf/Inter-Bold.otf')\n    }),\n    _useFonts2 = _slicedToArray(_useFonts, 1),\n    loaded = _useFonts2[0];\n  var dispatch = useDispatch();\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    height = _useState2[0],\n    setHeight = _useState2[1];\n  var headerHeight = useHeaderHeight();\n  var isDark = useSelector(function (state) {\n    return state.theme.isDark;\n  });\n  var actualColor = isDark ? 'white' : 'black';\n  var explicit = _jsx(MaterialIcons, {\n    name: \"explicit\",\n    size: 20,\n    color: actualColor\n  });\n  useEffect(function () {}, []);\n  var moreLoading = useSelector(function (state) {\n    return state.status.moreLoading;\n  });\n  var noMore = useSelector(function (state) {\n    return state.status.noMore;\n  });\n  var offset = useSelector(function (state) {\n    return state.status.offset;\n  });\n  var error = useSelector(function (state) {\n    return state.status.error;\n  });\n  var load = useSelector(function (state) {\n    return state.status.load;\n  });\n  var term = useSelector(function (state) {\n    return state.songs.termSearch;\n  });\n  var selectSong = function selectSong(song) {\n    console.log('Cancion seleccionada: ' + song.trackName);\n    dispatch(setIsSongSelected(true));\n    dispatch(setSelectedSong(song));\n  };\n  var fetchMore = function fetchMore() {\n    if (offset > 0 && !moreLoading && !noMore && !error) {\n      console.log('buscando mas');\n      dispatch(setLoad(true));\n    }\n  };\n  var isExplicit = function isExplicit(song) {\n    return _jsxs(__ReactNativeView, {\n      \"data-at\": \"SongItem.jsx:78\",\n      \"data-in\": \"SongItem\",\n      \"data-is\": \"XStack\",\n      style: [_sheet[\"0:SongItem.jsx:78\"], _sheet[\"1:SongItem.jsx:78\"]],\n      children: [song.trackExplicitness.includes('explicit') ? explicit : null, _jsx(Text, {\n        numberOfLines: 1,\n        children: song.artistName\n      })]\n    });\n  };\n  var items = function items(_ref) {\n    var item = _ref.item;\n    return item ? _jsx(ListItem, {\n      pressTheme: true,\n      icon: _jsx(Image, {\n        source: {\n          uri: item.artworkUrl60.replace(\"60x60\", \"120x120\")\n        },\n        style: {\n          width: 60,\n          height: 60\n        }\n      }),\n      title: item.trackName,\n      subTitle: isExplicit(item),\n      onPress: function onPress(_) {\n        return selectSong(item);\n      }\n    }) : null;\n  };\n  var renderEmpty = function renderEmpty() {\n    return term ? _jsx(View, {\n      style: {\n        height: height - headerHeight,\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      children: _jsx(Text, {\n        style: styles.alertText,\n        children: \"No se encontraron resultados\"\n      })\n    }) : null;\n  };\n  var renderFooter = function renderFooter() {\n    return _jsxs(View, {\n      style: styles.footerText,\n      children: [moreLoading && _jsx(Spinner, {\n        style: styles.centerText,\n        size: \"large\"\n      }), noMore && _jsx(Text, {\n        style: styles.alertText,\n        children: \"No se encontraron mas resultados\"\n      })]\n    });\n  };\n  return loaded && !error ? _jsx(View, {\n    style: styles.main,\n    onLayout: function onLayout(event) {\n      return setHeight(event.nativeEvent.layout.height);\n    },\n    children: _jsx(FlashList, {\n      contentContainerStyle: {\n        paddingBottom: 70\n      },\n      data: songs,\n      renderItem: items,\n      estimatedItemSize: 25,\n      ListEmptyComponent: renderEmpty,\n      ListFooterComponent: renderFooter,\n      onEndReachedThreshold: 0.2,\n      onEndReached: fetchMore\n    })\n  }) : null;\n});\nvar styles = StyleSheet.create({\n  main: {\n    flex: 1,\n    flexGrow: 1\n  },\n  alertText: {\n    width: '85%',\n    fontSize: 20,\n    textAlign: 'center'\n  },\n  centerText: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  footerText: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginVertical: 10\n  }\n});","map":{"version":3,"names":["React","memo","useState","useEffect","View","StyleSheet","Text","ListItem","Spinner","XStack","Image","useFonts","useSelector","useDispatch","setLoad","setMoreLoading","setIsSongSelected","setSelectedSong","FlashList","useHeaderHeight","MaterialIcons","jsx","_jsx","jsxs","_jsxs","SongItem","props","songs","_useFonts","Inter","require","InterBold","_useFonts2","_slicedToArray","loaded","dispatch","_useState","_useState2","height","setHeight","headerHeight","isDark","state","theme","actualColor","explicit","name","size","color","moreLoading","status","noMore","offset","error","load","term","termSearch","selectSong","song","console","log","trackName","fetchMore","isExplicit","__ReactNativeView","style","_sheet","children","trackExplicitness","includes","numberOfLines","artistName","items","_ref","item","pressTheme","icon","source","uri","artworkUrl60","replace","width","title","subTitle","onPress","_","renderEmpty","alignItems","justifyContent","styles","alertText","renderFooter","footerText","centerText","main","onLayout","event","nativeEvent","layout","contentContainerStyle","paddingBottom","data","renderItem","estimatedItemSize","ListEmptyComponent","ListFooterComponent","onEndReachedThreshold","onEndReached","create","flex","flexGrow","fontSize","textAlign","marginVertical"],"sources":["/Users/juanfer14/Public/itunes-edamm/components/SongItem.jsx"],"sourcesContent":["// Importo componentes y hook de react\nimport React, { memo, useState, useEffect } from 'react'\nimport {  View, StyleSheet} from 'react-native' \n\n\n// Importo componente de librerias\nimport { Text, ListItem,  Spinner, XStack } from 'tamagui'\n\n// Importo Image de expo para un mejor rendimiento\nimport { Image } from 'expo-image';\n\n// Importo fonts para tamagui\nimport { useFonts } from \"expo-font\";\n\n// Importo metodos del store y slices\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setLoad, setMoreLoading } from '../features/status/statusSlice';\nimport { setIsSongSelected, setSelectedSong } from '../features/songs/songSlice'\n\n// Importo flashlist para un mejor rendimiento\nimport { FlashList } from \"@shopify/flash-list\";\n\n// Obtengo el header del stack de navegacion\nimport { useHeaderHeight } from '@react-navigation/elements';\n\nimport { MaterialIcons } from '@expo/vector-icons';\n\n\n\nexport const SongItem = memo((props) => {\n\n  const {songs} = props;\n\n  const [loaded] = useFonts({\n    Inter: require('@tamagui/font-inter/otf/Inter-Medium.otf'),\n    InterBold: require('@tamagui/font-inter/otf/Inter-Bold.otf'),\n  });\n\n  const dispatch = useDispatch();\n\n  // Permite ajustar la altura, cuando no se obtienen resultados o hay error \n  const [height, setHeight] = useState(0);\n\n  // Altura del header de react-navigation\n  const headerHeight = useHeaderHeight();\n\n  const isDark = useSelector(state => state.theme.isDark);\n  const actualColor = isDark ? 'white' : 'black'\n\n\n  const explicit = <MaterialIcons name=\"explicit\"  size={20} color={actualColor} />\n\n  useEffect(() => {\n  }, [])\n  \n\n  const moreLoading = useSelector(state => state.status.moreLoading);\n  const noMore = useSelector(state => state.status.noMore);\n  const offset = useSelector(state => state.status.offset);\n  const error = useSelector(state => state.status.error);\n  const load = useSelector(state => state.status.load)\n  const term = useSelector(state => state.songs.termSearch)\n\n  const selectSong = (song) => {\n      console.log('Cancion seleccionada: ' + song.trackName);\n      dispatch(setIsSongSelected(true));\n      dispatch(setSelectedSong(song));\n  }\n\n  const fetchMore = () => {\n    if(offset > 0 && !moreLoading && !noMore && !error){\n        console.log('buscando mas')\n        dispatch(setLoad(true));\n    }\n  }\n\n  const isExplicit = (song) => \n    <XStack flex={1} flexDirection='row' alignItems=\"center\">\n      {song.trackExplicitness.includes('explicit') ? explicit : null}\n      {<Text numberOfLines={1}>{song.artistName}</Text>}\n    </XStack>\n    \n\n  const items = ({item}) => \n        item ?\n        <ListItem\n          pressTheme\n          icon={<Image source={{uri: item.artworkUrl60.replace(\"60x60\", \"120x120\")}} style={{ width: 60, height: 60 }} />}\n          title={item.trackName}\n          subTitle={isExplicit(item)}\n          onPress={_ => selectSong(item)}\n        />\n        : null\n\n    const renderEmpty = () => (\n        term ? \n        <View style={{height: height - headerHeight, alignItems: 'center', justifyContent: 'center'}}>\n            <Text style={styles.alertText}>No se encontraron resultados</Text>\n        </View>\n        : null    \n    )\n\n    const renderFooter = () => (\n        <View style={styles.footerText}>\n            {moreLoading && <Spinner style={styles.centerText} size=\"large\" />}\n            {noMore && <Text style={styles.alertText}>No se encontraron mas resultados</Text>} \n        </View>\n    )\n\n  return (\n    loaded && !error ?\n        <View style={styles.main} onLayout={(event) => setHeight(event.nativeEvent.layout.height)}>\n          <FlashList\n            contentContainerStyle={{paddingBottom: 70}}\n            data={songs}\n            renderItem={items}\n            estimatedItemSize={25}\n            ListEmptyComponent={renderEmpty}\n            ListFooterComponent={renderFooter}\n            onEndReachedThreshold={0.2}\n            onEndReached={fetchMore}\n          />\n        </View>\n    \n    \n    : null\n\n  )\n\n})\n\n\n\nconst styles = StyleSheet.create({\n  main: {\n    flex: 1,\n    flexGrow: 1,\n  },\n  alertText: {\n        width: '85%',\n        fontSize: 20,\n        textAlign: 'center',\n  },\n  centerText: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  footerText: {\n        flex: 1, \n        alignItems: 'center',\n        justifyContent: 'center',\n        marginVertical: 10\n    },\n})\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}