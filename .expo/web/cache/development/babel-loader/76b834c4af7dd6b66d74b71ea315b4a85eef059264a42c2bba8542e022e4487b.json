{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar __ReactNativeView = require('react-native').View;\nvar __ReactNativeText = require('react-native').Text;\nimport React, { memo, useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Text, ListItem, Spinner } from 'tamagui';\nimport { Image } from 'expo-image';\nimport { useFonts } from \"expo-font\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setLoad, setMoreLoading } from \"../features/status/statusSlice\";\nimport { setIsSongSelected, setSelectedSong } from \"../features/songs/songSlice\";\nimport { FlashList } from \"@shopify/flash-list\";\nimport { useHeaderHeight } from '@react-navigation/elements';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport var SongItem = memo(function (props) {\n  var songs = props.songs;\n  var _useFonts = useFonts({\n      Inter: require('@tamagui/font-inter/otf/Inter-Medium.otf'),\n      InterBold: require('@tamagui/font-inter/otf/Inter-Bold.otf')\n    }),\n    _useFonts2 = _slicedToArray(_useFonts, 1),\n    loaded = _useFonts2[0];\n  var dispatch = useDispatch();\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    height = _useState2[0],\n    setHeight = _useState2[1];\n  var headerHeight = useHeaderHeight();\n  useEffect(function () {}, []);\n  var moreLoading = useSelector(function (state) {\n    return state.status.moreLoading;\n  });\n  var noMore = useSelector(function (state) {\n    return state.status.noMore;\n  });\n  var offset = useSelector(function (state) {\n    return state.status.offset;\n  });\n  var error = useSelector(function (state) {\n    return state.status.error;\n  });\n  var load = useSelector(function (state) {\n    return state.status.load;\n  });\n  var selectSong = function selectSong(song) {\n    console.log('Cancion seleccionada: ' + song.trackName);\n    dispatch(setIsSongSelected(true));\n    dispatch(setSelectedSong(song));\n  };\n  var fetchMore = function fetchMore() {\n    if (offset > 0 && !moreLoading && !noMore && !error) {\n      console.log('buscando mas');\n      dispatch(setLoad(true));\n    }\n  };\n  var items = function items(_ref) {\n    var item = _ref.item;\n    return _jsx(ListItem, {\n      pressTheme: true,\n      icon: _jsx(Image, {\n        source: {\n          uri: item.artworkUrl60\n        },\n        style: {\n          width: 60,\n          height: 60\n        }\n      }),\n      title: item.trackName,\n      subTitle: item.artistName,\n      onPress: function onPress(_) {\n        return selectSong(item);\n      }\n    });\n  };\n  var renderEmpty = function renderEmpty() {\n    return _jsx(View, {\n      style: {\n        height: height - headerHeight,\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      children: _jsx(Text, {\n        style: styles.alertText,\n        children: \"No se encontraron resultados\"\n      })\n    });\n  };\n  var renderFooter = function renderFooter() {\n    return _jsxs(View, {\n      style: styles.footerText,\n      children: [moreLoading && _jsx(Spinner, {\n        style: styles.centerText,\n        size: \"large\"\n      }), noMore && _jsx(Text, {\n        style: styles.alertText,\n        children: \"No se encontraron mas resultados\"\n      })]\n    });\n  };\n  return loaded && !error ? _jsx(View, {\n    style: styles.main,\n    onLayout: function onLayout(event) {\n      return setHeight(event.nativeEvent.layout.height);\n    },\n    children: _jsx(FlashList, {\n      contentContainerStyle: {\n        flex: 1,\n        paddingTop: 10,\n        paddingBottom: 70\n      },\n      data: songs,\n      renderItem: items,\n      estimatedItemSize: 25,\n      ListEmptyComponent: renderEmpty,\n      ListFooterComponent: renderFooter,\n      onEndReachedThreshold: 0.4,\n      onEndReached: fetchMore\n    })\n  }) : null;\n});\nvar styles = StyleSheet.create({\n  main: {\n    flex: 1,\n    flexGrow: 1\n  },\n  alertText: {\n    width: '85%',\n    fontSize: 20,\n    textAlign: 'center'\n  },\n  centerText: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  footerText: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginVertical: 10\n  }\n});","map":{"version":3,"names":["React","memo","useState","useEffect","View","StyleSheet","Text","ListItem","Spinner","Image","useFonts","useSelector","useDispatch","setLoad","setMoreLoading","setIsSongSelected","setSelectedSong","FlashList","useHeaderHeight","jsx","_jsx","jsxs","_jsxs","SongItem","props","songs","_useFonts","Inter","require","InterBold","_useFonts2","_slicedToArray","loaded","dispatch","_useState","_useState2","height","setHeight","headerHeight","moreLoading","state","status","noMore","offset","error","load","selectSong","song","console","log","trackName","fetchMore","items","_ref","item","pressTheme","icon","source","uri","artworkUrl60","style","width","title","subTitle","artistName","onPress","_","renderEmpty","alignItems","justifyContent","children","styles","alertText","renderFooter","footerText","centerText","size","main","onLayout","event","nativeEvent","layout","contentContainerStyle","flex","paddingTop","paddingBottom","data","renderItem","estimatedItemSize","ListEmptyComponent","ListFooterComponent","onEndReachedThreshold","onEndReached","create","flexGrow","fontSize","textAlign","marginVertical"],"sources":["/Users/juanfer14/Public/itunes-edamm/components/SongItem.jsx"],"sourcesContent":["// Importo componentes y hook de react\nimport React, { memo, useState, useEffect } from 'react'\nimport {  View, StyleSheet} from 'react-native' \n\n\n// Importo componente de librerias\nimport { Text, ListItem,  Spinner } from 'tamagui'\n\n// Importo Image de expo para un mejor rendimiento\nimport { Image } from 'expo-image';\n\n// Importo fonts para tamagui\nimport { useFonts } from \"expo-font\";\n\n// Importo metodos del store y slices\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setLoad, setMoreLoading } from '../features/status/statusSlice';\nimport { setIsSongSelected, setSelectedSong } from '../features/songs/songSlice'\n\n// Importo flashlist para un mejor rendimiento\nimport { FlashList } from \"@shopify/flash-list\";\n\n// Obtengo el header del stack de navegacion\nimport { useHeaderHeight } from '@react-navigation/elements';\n\n\nexport const SongItem = memo((props) => {\n\n  const {songs} = props;\n\n  const [loaded] = useFonts({\n    Inter: require('@tamagui/font-inter/otf/Inter-Medium.otf'),\n    InterBold: require('@tamagui/font-inter/otf/Inter-Bold.otf'),\n  });\n\n  const dispatch = useDispatch();\n\n  // Permite ajustar la altura, cuando no se obtienen resultados o hay error \n  const [height, setHeight] = useState(0);\n\n  // Altura del header de react-navigation\n  const headerHeight = useHeaderHeight();\n\n  //const theme = useSelector(state => state.theme.actual);\n\n  useEffect(() => {\n  }, [])\n  \n\n  const moreLoading = useSelector(state => state.status.moreLoading);\n  const noMore = useSelector(state => state.status.noMore);\n  const offset = useSelector(state => state.status.offset);\n  const error = useSelector(state => state.status.error);\n  const load = useSelector(state => state.status.load)\n\n  const selectSong = (song) => {\n      console.log('Cancion seleccionada: ' + song.trackName);\n      dispatch(setIsSongSelected(true));\n      dispatch(setSelectedSong(song));\n  }\n\n  const fetchMore = () => {\n    if(offset > 0 && !moreLoading && !noMore && !error){\n        console.log('buscando mas')\n        dispatch(setLoad(true));\n    }\n  }\n\n  const items = ({item}) => \n        <ListItem\n          pressTheme\n          icon={<Image source={{uri: item.artworkUrl60}} style={{ width: 60, height: 60 }} />}\n          title={item.trackName}\n          subTitle={item.artistName}\n          onPress={_ => selectSong(item)}\n        />\n\n    const renderEmpty = () => (\n        <View style={{height: height - headerHeight, alignItems: 'center', justifyContent: 'center'}}>\n            <Text style={styles.alertText}>No se encontraron resultados</Text>\n        </View>    \n    )\n\n    const renderFooter = () => (\n        <View style={styles.footerText}>\n            {moreLoading && <Spinner style={styles.centerText} size=\"large\" />}\n            {noMore && <Text style={styles.alertText}>No se encontraron mas resultados</Text>} \n        </View>\n    )\n\n  return (\n    loaded && !error ?\n        <View style={styles.main} onLayout={(event) => setHeight(event.nativeEvent.layout.height)}>\n          <FlashList\n            contentContainerStyle={{flex: 1, paddingTop: 10, paddingBottom: 70}}\n            data={songs}\n            renderItem={items}\n            estimatedItemSize={25}\n            ListEmptyComponent={renderEmpty}\n            ListFooterComponent={renderFooter}\n            onEndReachedThreshold={0.4}\n            onEndReached={fetchMore}\n          />\n        </View>\n    \n    \n    : null\n\n  )\n\n})\n\n\n\nconst styles = StyleSheet.create({\n  main: {\n    flex: 1,\n    flexGrow: 1,\n  },\n  alertText: {\n        width: '85%',\n        fontSize: 20,\n        textAlign: 'center',\n  },\n  centerText: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  footerText: {\n        flex: 1, \n        alignItems: 'center',\n        justifyContent: 'center',\n        marginVertical: 10\n    },\n})\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}